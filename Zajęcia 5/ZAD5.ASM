
	LJMP	START
	ORG	100H

START:
	LCALL LCD_CLR
	LCALL WAITKEYS
	LCALL WRITE_HEX

STOP:
	SJMP	STOP

WAITKEYS:

	MOV R0, #CSDS

L12:
	MOV R1, #00000001B
	MOV R2, #00000000B
	MOV R3, #6
	

LOOP:	MOV A, R1
	MOVX @R0, A
	JNB P3.5, L11
	ORL A, R2
	MOV R2, A

L11:	MOV A, R1
	RL A
	MOV R1, A
	
	DJNZ R3, LOOP
	MOV A, R2
	JZ L12

	MOV R4, #0
L13:
	RRC A
	INC R4
	JNC L13
	MOV A, R4
	RET